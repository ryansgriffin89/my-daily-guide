<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>My Daily Guide</title>

  <!-- PWA -->
  <meta name="theme-color" content="#121212" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="./manifest.webmanifest" />

  <!-- Styles -->
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!-- Top Bar -->
  <div class="topbar">
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
      <div>
        <h1 style="margin:0;">My Daily Guide</h1>
        <div id="todayMeta" class="details" style="margin-top:6px;">Loading…</div>
      </div>

      <div style="display:flex; gap:8px; align-items:center;">
        <button id="btnReminders" class="btn ghost">Reminders</button>
        <button id="btnResetDay" class="btn ghost">Reset</button>
      </div>
    </div>

    <!-- Stats Row -->
    <div style="display:flex; gap:14px; margin-top:12px; flex-wrap:wrap;">
      <div class="block" style="padding:12px 14px; margin:0;">
        <div class="details">Done</div>
        <div id="doneValue" style="font-size:18px; font-weight:600;">0/0</div>
      </div>
      <div class="block" style="padding:12px 14px; margin:0;">
        <div class="details">Streak</div>
        <div id="streakValue" style="font-size:18px; font-weight:600;">0</div>
      </div>
      <div class="block" style="padding:12px 14px; margin:0;">
        <div class="details">Mode</div>
        <div id="dayBadge" style="font-size:14px; font-weight:600;">—</div>
      </div>
      <div class="block" style="padding:12px 14px; margin:0;">
        <div class="details">Status</div>
        <div id="offlineStatus" style="font-size:14px; font-weight:600;">Loading…</div>
      </div>
    </div>

    <!-- Search -->
    <div style="margin-top:12px;">
      <input id="searchInput" placeholder="Search tasks…" style="width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#141414; color:#fff;" />
    </div>

    <!-- Action Buttons -->
    <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
      <button id="btnMinimum" class="btn">Minimum Day</button>
      <button id="btnExport" class="btn ghost">Export</button>
      <button id="btnImport" class="btn ghost">Import</button>
    </div>
  </div>

  <!-- Main View -->
  <main style="padding:16px; padding-bottom:110px;">
    <div class="section-title" id="todayTitle" style="font-size:14px; text-transform:uppercase; letter-spacing:1px; margin:6px 0 12px 0;">Today</div>
    <div id="view"></div>
  </main>

  <!-- Bottom Tabs (app.js expects id="tabs") -->
  <nav class="tabs" id="tabs"></nav>

  <!-- Import Dialog (app.js expects these IDs) -->
  <dialog id="importDialog">
    <h3 style="margin-top:0;">Import</h3>
    <div class="details">Paste JSON from a previous export.</div>
    <textarea id="importArea" style="width:100%; height:180px; margin-top:10px; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#141414; color:#fff;"></textarea>
    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:12px;">
      <button class="btn ghost" onclick="document.getElementById('importDialog').close()">Cancel</button>
      <button id="btnImportConfirm" class="btn">Confirm</button>
    </div>
  </dialog>

  <!-- Reminders Dialog (app.js expects these IDs) -->
  <dialog id="remindersDialog">
    <h3 style="margin-top:0;">Reminders</h3>

    <label style="display:flex; gap:10px; align-items:center; margin:10px 0;">
      <input id="remindersEnabled" type="checkbox" />
      <span>Enable reminders</span>
    </label>

    <label style="display:flex; gap:10px; align-items:center; margin:10px 0;">
      <input id="remindersOffToday" type="checkbox" />
      <span>Off today</span>
    </label>

    <div class="details" style="margin:10px 0;">Times</div>

    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
      <label>Morning <input id="timeMorning" type="time" style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#141414; color:#fff;" /></label>
      <label>Midday <input id="timeMidday" type="time" style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#141414; color:#fff;" /></label>
      <label>Evening <input id="timeEvening" type="time" style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(255,255255,255,0.08); background:#141414; color:#fff;" /></label>
      <label>Bed <input id="timeBed" type="time" style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#141414; color:#fff;" /></label>
    </div>

    <div class="details" style="margin:14px 0 8px;">Skip blocks today</div>
    <div id="skipButtons" style="display:flex; gap:8px; flex-wrap:wrap;"></div>

    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:14px;">
      <button class="btn ghost" onclick="document.getElementById('remindersDialog').close()">Close</button>
      <button id="btnSaveReminders" class="btn">Save</button>
    </div>
  </dialog>

  <!-- App Script -->
  <script src="./app.js"></script>
</body>
</html>
